{% set name = "cint" %}
{% set version = "3.0.17" %}

package:
    name: {{ name|lower }}
    version: {{ version }}
source:
    git_url: https://github.com/GQCG/libcint.git
    git_tag: develop
requirements:
    build:
      - cmake {{ cmake }}
      - {{ compiler('c') }}
      - {{ compiler('cxx') }}
      - eigen {{ eigen }}
      - git
      - make
      - mkl-static {{ mkl_static }}
      - mkl-include {{ mkl_include }}
    host:
      - blas {{ blas }}
      - intel-openmp {{ intel_openmp }}
      - mkl {{ mkl }}
      - numpy {{ numpy }}
      - llvm-openmp               # [osx]
      - openmp {{ openmp }}       # [linux]
      - python {{ python }}
    run:
      - {{ pin_compatible('blas') }}
      - {{ pin_compatible('intel-openmp') }}
      - {{ pin_compatible('mkl') }}
      - numpy {{ numpy }}
      - python {{ python }}
      - llvm-openmp                    # [osx]
      - {{ pin_compatible('openmp') }} # [linux]

test:
  commands:
    - test -f ${PREFIX}/lib/libcint$SHLIB_EXT
    - test -f ${PREFIX}/include/cint.h
    - ldd -v ${PREFIX}/lib/libcint$SHLIB_EXT    # [linux]
    - otool -L ${PREFIX}/lib/libcint$SHLIB_EXT  # [osx]
about:
    home: https://github.com/GQCG/libcint
    license: BSD
    license_file: LICENSE
    summary: 'General GTO integrals for quantum chemistry.'
